function mercY(latitude) { 
        return Math.ln(Math.tan(latitude / 2 + Math.PI / 4)); 
    }

    function deg2rad(deg){ 
  	return (deg * Math.PI / 180.0);
  }

function mapProject(lat, lon) { // both in radians, use deg2rad if neccessary
  // This map would show Germany:
    var south = deg2rad(49.892958);
    var north = deg2rad(49.899702);
    var west = deg2rad(18.548841);
    var east = deg2rad(18.560379);

// This also controls the aspect ratio of the projection
    var width = 218;
    var height = 218;

// Formula for mercator projection y coordinate:

// Some constants to relate chosen area to screen coordinates
    var ymin = mercY(south);
    var ymax = mercY(north);
    var xFactor = width / (east - west);
    var yFactor = height / (ymax - ymin);
    var x,y;
  x = lon;
  y = mercY(lat);
  x = (x - west) * xFactor;
  y = (ymax - y) * yFactor;
  var result = new [2];
  result[0] = x;
  result[1] = y; // y points south
  return result;
}